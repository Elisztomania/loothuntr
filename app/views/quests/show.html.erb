<!--Header-->
<div class="font-sans leading-normal tracking-normal">
  <% if @quest.photo.attached? %>
    <div class="w-full m-0 p-0 bg-cover bg-bottom" style="background-image:url('<%= cl_image_path @quest.photo.key %>'); background-position: center; height: 60vh; max-height:460px; box-shadow: inset 0 0 0 100vw rgba(7, 25, 43, 0.4)">
  <% else %>
    <div class="w-full m-0 p-0 bg-cover bg-bottom" style="background-image:url('https://images.unsplash.com/photo-1521897258701-21e2a01f5e8b?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTF8fGNvaW5zfGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=700&q=60'); background-position: center; height: 60vh; max-height:460px; box-shadow: inset 0 0 0 100vw rgba(7, 25, 43, 0.4)">
  <% end %>
    <div class="container max-w-4xl mx-auto pt-16 md:pt-32 text-center break-normal">
      <!--Title-->
      <p class="text-white font-extrabold text-3xl md:text-5xl">
        🤠 <%= @quest.title %>
      </p>
    </div>

    <!--Container-->
    <div class="container px-4 md:px-0 max-w-6xl mx-auto -mt-32">
      <div class="mx-0 sm:mx-6">
        <div class="bg-white-200 w-full text-xl md:text-2xl text-gray-800 leading-normal rounded-t">

        <!--Lead Card-->
        <div class="flex h-full bg-white rounded overflow-hidden shadow-lg">

          <div class="w-full md:w-1/2 group transition-transform duration-200 transform sm:hover:-translate-y-1 rounded-xl">
            <div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg h-full">
              <h2 class="w-full font-bold text-xl text-gray-900 px-6 mt-4 mb-4">🤔 Description</h2>
              <p class="text-gray-800 font-serif text-base px-10 mb-5 ">
                <%= @quest.description %>
              </p>
            </div>
          </div>

          <div class="w-full md:w-1/2 group transition-transform duration-200 transform sm:hover:-translate-y-1 rounded-xl">
            <div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg h-full">
              <h2 class="w-full font-bold text-xl text-gray-900 px-6 mt-4 mb-4 ">🤩 Informations clés</h2>
                <div class="text-gray-800 font-serif text-base px-10 justify-self-center">
                   <p> 📍 <%= @quest.location %> </p>

                   <p> ➡️ <%= @quest.resolved ? "Résolue" : "Non résolue" %> </p>

                   <p> 🕺 <%= @quest.creator.username %> </p>

                </div>

  <!--  INFO SI GUILDE ET LA REJOINDRE / TABLEAU DE BORD -->
      <div class="mx-10 my-6 text-center text-sm">
        <% if @quest.guild.present? %>
          <% if current_user != nil && @quest.resolved == true %>
            <p class="text-lg">La guilde <strong><%= @quest.guild.name %></strong> a résolu la quête</p>
          <% elsif current_user != nil && current_user.is_member_of?(@quest.guild) %>
            <p class="text-base font-semibold mt-10"> Guilde active sur la quête : <%= @quest.guild.name %> </p><br>
            <%= link_to "Tableau de bord de guilde", guild_path(@quest.guild), class: "btn-dash mx-auto lg:mx-0 font-extrabold rounded mt-20 md:my-6 py-2 px-4 w-48n no-underline" %>
          <% elsif current_user != nil && !current_user.has_apply_to?(@quest.guild) %>
            <p class="text-base font-semibold mt-10"> Guilde active sur la quête : <%= @quest.guild.name %> </p><br>
            <%= link_to "Postuler pour les rejoindre", new_guild_member_path(@quest.guild), class: "btn-rejoindre mx-auto lg:mx-0 font-extrabold rounded mt-20 md:my-6 py-2 px-4 w-48n no-underline" %>
          <% end %>
        <% elsif @quest.creator == current_user %>
            <%= link_to 'Créer une guilde', new_quest_guild_path(@quest), class: "" %>

        <% else %>
            <p>Pas de guilde active sur la quête</p>
        <% end %>
      </div>

  <!--  EDIT QUEST -->
                <div class="text-right mx-10 mt-20 mb-5">
                  <% if current_user != nil && current_user == @quest.creator %>
                    <%= link_to edit_quest_path(@quest.id) do %>
                      <i class="fas fa-pencil-alt"></i>
                    <% end %>
                  <% end %>
                </div>

            </div>
            </div>

        </div>
      </div>
    </div>

    <h2 class="m-10 p-10 text-center text-xl">Les avancées : <%= @quest.title %></h2>

  <!-- POST DES AVANCEES BOUCLE-->
      <div class="grid gap-6 mb-8 md:grid-cols-2">
        <% @quest.avancees.each do |avancee| %>
        <div class="m-6 p-6 min-w-0 p-4 bg-white rounded-m shadow-lg dark:bg-gray-800">
          <h3 class="pb-0.5 font-semibold text-lg"><%= avancee.title %></h3><br>
          <p class="text-justify"><%= avancee.description %></p>

          <div class="inline-flex space-x-4 p-6 center">
          <% avancee.photos.each do |photo| %>
              <div class="flex-1 self-center"><%= cl_image_tag photo.key, height: 300, width: 400 %></div>
          <% end %>
          </div>
        </div>
        <% end %>
    </div>

    </div>





  <!-- Code de la team BACK -->



  <!-- RETOUR TOUTES LES QUESTS -->
  <div class="mx-40 m-20 text-center">
    <%= link_to 'Retour', quests_path, class: "btn-back mx-auto lg:mx-0 font-extrabold rounded mt-20 md:my-6 py-2 px-4 w-48n no-underline" %>
  </div>

  </div>
<!-- Code de la team BACK -->
