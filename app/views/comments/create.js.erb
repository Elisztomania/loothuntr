html = "<%= j render 'comments/comment_section', comment: @comment %>"
post_id = "<%= @comment.post.id %>"

document.getElementById(post_id).querySelector(".comments").insertAdjacentHTML('beforeend', html)
document.getElementById(post_id).querySelector('#comment_content').value=''


// if commentaire pas d'id, regénérer le formulaire
//   end
// rendre ça dynamique
// insert le nouveau commentaire et nettoyer le formualire
// si ça marche pas, rendre le formulaire avec une erreur (content is needed -> pas obligatoire)

// le j ça échappe le contenu bc c'est du js


const listMessage = () => {
  cleanMessagesList();
  fetch(`${baseUrl}/481/messages`)
    .then(response => response.json())
    .then((data) => {
      document.getElementById(post_id).querySelector('#comment_content').value=''

      for (let i = 0; i <= 12; i += 1) {
        const index = data.messages.length - 1 - i;
        document.getElementById(post_id).querySelector(".comments").insertAdjacentHTML('beforeend', html)
      }
    });
};

btnRefresh.addEventListener(("click"), (event) => {
  listMessage();
});
